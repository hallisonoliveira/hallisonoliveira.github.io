<!DOCTYPE html> <html lang="pt-br"> <head> <link href="http://gmpg.org/xfn/11" rel="profile"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta http-equiv="content-type" content="text/html; charset=utf-8"> <!-- Enable responsiveness on mobile devices--> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"> <title> L - Princípio de Substituição de Liskov </title> <!-- CSS --> <link rel="stylesheet" href="/src/css/syntax.css"> <link rel="stylesheet" href="/src/css/lanyon.css"> <!-- Icons --> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png"> <link rel="shortcut icon" href="/assets/img/favicon.png"> <!-- RSS --> <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml"> <!-- Cards --> <link rel="stylesheet" href="/src/css/main.css"> <link rel="alternate" type="application/rss+xml" title="Hallison Oliveira" href="https://hallisonoliveira.com.br/feed.xml"> <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"> </head> <body> <input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox"> <!-- Toggleable sidebar --> <div class="sidebar" id="sidebar"> <div class="sidebar-item"> <h4 style="color: white; text-align: center">Hallison Oliveira</h4> </div> <div style="text-align: center"> <a href="https://www.linkedin.com/in/hallisonoliveira" style="margin-right: 8px"> <img src="/src/images/linkedin.png"/> </a> <a href="https://github.com/hallisonoliveira" style="margin-right: 15px"> <img src="/src/images/github.png"/> </a> <a href="https://twitter.com/hallisoncwb"> <img src="/src/images/twitter.png"/> </a> </div> <br /> <nav class="sidebar-nav"> <a class="sidebar-nav-item" href="/">Inicio</a> <a class="sidebar-nav-item" href="/posts">Posts</a> <a class="sidebar-nav-item" href="/about">Sobre</a> </nav> <div class="sidebar-item"> <p> &copy; 2025. Todos os direitos reservados. </p> </div> </div> <div class="wrap"> <div class="masthead"> <div class="container masthead-flex"> <h3 class="masthead-title"> <a href="/" title="Home">Hallison Oliveira</a> <small></small> </h3> <div class="language-switcher"> <a href="/en/liskov_substitution/" class="lang-btn "> <img src="/assets/img/flags/us.svg" alt="English" class="flag-icon"> </a> </div> </div> </div> <div class="container"> <div class="wrapper"> <div class="row"> <div class="col-md-10"> <article class="page-post" itemscope itemtype="http://schema.org/BlogPosting"> <!-- Título do Post --> <h1 class="post-title" itemprop="name headline">L - Princípio de Substituição de Liskov</h1> <!-- Categoria e Data --> <div class="post-meta"> <span class="post-category">SOLID</span> <span class="post-date"> <time datetime="2022-08-18T00:00:00-03:00" itemprop="datePublished">Aug 18, 2022</time> </span> </div> <!-- Imagem --> <div class="post-image"> <img src="/images/solid/liskov_substitution.png" alt="L - Princípio de Substituição de Liskov" class="post-image-img"> </div> <!-- Conteúdo do Post --> <div class="post-content" itemprop="articleBody"> <p>Em inglês, <em>Liskov Substitution Principle</em>.</p> <h2 id="um-pouco-de-história">Um pouco de história</h2> <p>Esse princípio vem do notável trabalho de <a href="https://en.wikipedia.org/wiki/Barbara_Liskov">Bárbara Liskov</a>, cientista da computação, que foi pioneira em diversas contribuições para a ciência da computação e computação distribuída.</p> <p>Barbara foi reconhecida em 2008 com o <em><a href="https://en.wikipedia.org/wiki/Turing_Award">Turing Award</a></em>, a mais alta distinção em ciência da computação, dada à ela “por contribuições para fundamentos práticos e teóricos de linguagem de programação e design de sistemas, especialmente relacionados à abstração de dados, tolerância a falhas e computação distribuída”. <a href="https://amturing.acm.org/award_winners/liskov_1108679.cfm"><em>traduzido de</em> A. M. Turing Award</a>.</p> <p>No vídeo abaixo, Bárbara fala para o A. M. Turing Award sobre a origem e o nome desse princípio:</p> <div class="youtube-wrapper"> <iframe src="https://www.youtube.com/embed/-Z-17h3jG0A" allowfullscreen=""></iframe> </div> <h2 id="o-princípio">O princípio</h2> <p>Basicamente, o Princípio de Substituição de Liskov fala sobre tipagem comportamental. Ou seja, quando temos uma classe principal e uma sub-classe que extende da principal (herança), a sub-classe deve se comportar da mesma forma que a classe principal, podendo substituí-la sem que a execução do sistema seja comprometida.</p> <h3 id="comportamento">Comportamento</h3> <p>Vejamos o seguinte exemplo, onde esse princípio é quebrado:</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">open</span> <span class="kd">class</span> <span class="nc">ValidadorDeTexto</span> <span class="p">{</span>
    <span class="k">open</span> <span class="kd">val</span> <span class="py">limiteDeCaracteres</span> <span class="p">=</span> <span class="mi">5</span>

    <span class="k">fun</span> <span class="nf">ehValido</span><span class="p">(</span><span class="n">texto</span><span class="p">:</span> <span class="nc">String</span><span class="p">):</span> <span class="nc">Boolean</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">texto</span><span class="p">.</span><span class="n">length</span> <span class="p">&lt;</span> <span class="n">limiteDeCaracteres</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">validador</span><span class="p">:</span> <span class="nc">ValidadorDeTexto</span> <span class="p">=</span> <span class="nc">ValidadorDeTexto</span><span class="p">()</span>

    <span class="kd">val</span> <span class="py">nome</span> <span class="p">=</span> <span class="s">"Carlos"</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">validador</span><span class="p">.</span><span class="nf">ehValido</span><span class="p">(</span><span class="n">nome</span><span class="p">))</span> <span class="p">{</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"Nome valido"</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"Nome invalido"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Nome invalido
</code></pre></div></div> <p>No código acima, temos a classe <code class="language-plaintext highlighter-rouge">ValidadorDeTexto</code>, que tem por objetivo validar o tamanho do texto através da função <code class="language-plaintext highlighter-rouge">ehValido(texto: String): Boolean</code> , que retorna <code class="language-plaintext highlighter-rouge">True</code> se o texto enviado tiver tamanho menor do que o definido na variável <code class="language-plaintext highlighter-rouge">limiteDeCaracteres</code>. Essa classe é uma <code class="language-plaintext highlighter-rouge">open class</code>, o que significa que podemos utilizá-la diretamente ou criar novas classes que estendem dela.</p> <p>Nesse primeiro exemplo, fizemos uso da classe <code class="language-plaintext highlighter-rouge">ValidadorDeTexto</code> diretamente passando o texto <code class="language-plaintext highlighter-rouge">Carlos</code> para ser validado. O resultado é <code class="language-plaintext highlighter-rouge">Nome invalido</code>, já que o texto possui 6 caracteres e ultrapassa o limite de 5 caracteres definido pela variável <code class="language-plaintext highlighter-rouge">limiteDeCaracteres</code>.</p> <p>Agora, imagine que temos um cenário onde precisamos criar um validador específico para nomes. Esse novo validador deve permitir nomes de até 10 caracteres.</p> <p>Já que a classe <code class="language-plaintext highlighter-rouge">ValidadorDeTexto</code> é uma <code class="language-plaintext highlighter-rouge">open class</code>, podemos criar o novo validador herdando dela e aproveitar a implementação da função já existente. Ou seja, a classe <code class="language-plaintext highlighter-rouge">ValidadorDeNome</code>, que iremos criar, será uma sub-classe de <code class="language-plaintext highlighter-rouge">ValidadorDeTexto</code>.</p> <p>Vejamos abaixo como ficaria:</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">open</span> <span class="kd">class</span> <span class="nc">ValidadorDeTexto</span> <span class="p">{</span>
    <span class="k">open</span> <span class="kd">val</span> <span class="py">limiteDeCaracteres</span> <span class="p">=</span> <span class="mi">5</span>

    <span class="k">fun</span> <span class="nf">ehValido</span><span class="p">(</span><span class="n">texto</span><span class="p">:</span> <span class="nc">String</span><span class="p">):</span> <span class="nc">Boolean</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">texto</span><span class="p">.</span><span class="n">length</span> <span class="p">&lt;</span> <span class="n">limiteDeCaracteres</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">ValidadorDeNome</span> <span class="p">:</span> <span class="nc">ValidadorDeTexto</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">override</span> <span class="kd">val</span> <span class="py">limiteDeCaracteres</span> <span class="p">=</span> <span class="mi">10</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">validador</span> <span class="p">=</span> <span class="nc">ValidadorDeNome</span><span class="p">()</span>

    <span class="kd">val</span> <span class="py">nome</span> <span class="p">=</span> <span class="s">"Carlos"</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">validador</span><span class="p">.</span><span class="nf">ehValido</span><span class="p">(</span><span class="n">nome</span><span class="p">))</span> <span class="p">{</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"Nome valido"</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"Nome invalido"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Nome valido
</code></pre></div></div> <p>Do ponto de vista de código, essa é uma solução válida e não gera problemas de compilação ou execução. Porém, o Princípio de Substituição de Liskov é quebrado pois, quando substituímos a classe <code class="language-plaintext highlighter-rouge">ValidadorDeTexto</code> pela sua sub-classe <code class="language-plaintext highlighter-rouge">ValidadorDeNome</code>, o comportamento do sistema é alterado. Ou seja, o mesmo texto que antes era inválido, passou a ser válido após a mudança.</p> <p>Esse efeito é perigoso pelo fato de que a mudança na validação não é explícita e só é visível analisando a implementação, o que não pode ser aceito. Se esses validadores estivessem em uma biblioteca externa, é provável que não seja possível ter acesso à implementação. Assim, não seria possível avaliar o comportamento sem que o sistema seja executado ou através de testes unitários.</p> <h3 id="exceptions"><em>Exceptions</em></h3> <p>Esse princípio não trata apenas de comportamentos e retornos. É importante tomar cuidado também com o lançamento de exceções pelas sub-classes, onde novas exceções não podem ser lançadas pelas funções das sub-classes, a não ser que essas exceções sejam subtipos das exceções já lançadas pelas funções da classe principal.</p> <h2 id="referências">Referências</h2> <ul> <li>Arquitetura Limpa: O Guia do Artesão para Estrutura e Design de Software. Martin, Robert C ; traduzido por Samantha Batista. Rio de Janeiro. Alta Books, 2018.</li> </ul> </div> </article> <div class="row"> <ul class="pager"> <li><a class="previous" href="/posts/solid.html">&laquo; SOLID by example com Kotlin</a></li> </ul> </div> <!-- Seção de Comentários (Disqus) --> <div class="row"> <br/> Comente abaixo e dê seu feedback em relação ao post. <br/> <div id="disqus_thread"></div> <script> var disqus_config = function () { this.page.url = 'https://hallisonoliveira.com.br/liskov_substitution/'; this.page.identifier = '/liskov_substitution/'; }; (function () { var d = document, s = d.createElement('script'); s.src = 'https://hallisonoliveira.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> </div> </div> </div> </div> </div> </div> <label for="sidebar-checkbox" class="sidebar-toggle"></label> <script> (function(document) { var toggle = document.querySelector('.sidebar-toggle'); var sidebar = document.querySelector('#sidebar'); var checkbox = document.querySelector('#sidebar-checkbox'); document.addEventListener('click', function(e) { var target = e.target; if(!checkbox.checked || sidebar.contains(target) || (target === checkbox || target === toggle)) return; checkbox.checked = false; }, false); })(document); </script> <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script> <script src="/src/js/bootstrap.min.js"></script> </body> </html>
