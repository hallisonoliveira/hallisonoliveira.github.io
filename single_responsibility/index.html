<!DOCTYPE html> <html lang="pt-br"> <head> <link href="http://gmpg.org/xfn/11" rel="profile"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta http-equiv="content-type" content="text/html; charset=utf-8"> <!-- Enable responsiveness on mobile devices--> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"> <title> S - Princípio da Responsabilidade Única </title> <!-- CSS --> <link rel="stylesheet" href="/src/css/syntax.css"> <link rel="stylesheet" href="/src/css/lanyon.css"> <!-- Icons --> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png"> <link rel="shortcut icon" href="/assets/img/favicon.png"> <!-- RSS --> <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml"> <!-- Cards --> <link rel="stylesheet" href="/src/css/main.css"> <link rel="alternate" type="application/rss+xml" title="Hallison Oliveira" href="https://hallisonoliveira.com.br/feed.xml"> <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"> </head> <body> <input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox"> <!-- Toggleable sidebar --> <div class="sidebar" id="sidebar"> <div class="sidebar-item"> <h4 style="color: white; text-align: center">Hallison Oliveira</h4> </div> <div style="text-align: center"> <a href="https://www.linkedin.com/in/hallisonoliveira" style="margin-right: 8px"> <img src="/src/images/linkedin.png"/> </a> <a href="https://github.com/hallisonoliveira" style="margin-right: 15px"> <img src="/src/images/github.png"/> </a> <a href="https://twitter.com/hallisoncwb"> <img src="/src/images/twitter.png"/> </a> </div> <br /> <nav class="sidebar-nav"> <a class="sidebar-nav-item" href="/">Inicio</a> <a class="sidebar-nav-item" href="/posts">Posts</a> <a class="sidebar-nav-item" href="/about">Sobre</a> </nav> <div class="sidebar-item"> <p> &copy; 2025. Todos os direitos reservados. </p> </div> </div> <div class="wrap"> <div class="masthead"> <div class="container masthead-flex"> <h3 class="masthead-title"> <a href="/" title="Home">Hallison Oliveira</a> <small></small> </h3> <div class="language-switcher"> <a href="/en/single_responsibility/" class="lang-btn "> <img src="/assets/img/flags/us.svg" alt="English" class="flag-icon"> </a> </div> </div> </div> <div class="container"> <div class="wrapper"> <div class="row"> <div class="col-md-10"> <article class="page-post" itemscope itemtype="http://schema.org/BlogPosting"> <!-- Título do Post --> <h1 class="post-title" itemprop="name headline">S - Princípio da Responsabilidade Única</h1> <!-- Categoria e Data --> <div class="post-meta"> <span class="post-category">SOLID</span> <span class="post-date"> <time datetime="2022-08-02T00:00:00-03:00" itemprop="datePublished">Aug 2, 2022</time> </span> </div> <!-- Imagem --> <div class="post-image"> <img src="/images/solid/single_responsibility.png" alt="S - Princípio da Responsabilidade Única" class="post-image-img"> </div> <!-- Conteúdo do Post --> <div class="post-content" itemprop="articleBody"> <p>Em inglês, <em>Single Responsibility Principle</em>.</p> <p>Esse é o princípio que mais causa confusão. Não pela complexidade do princípio em si, mas pelo nome, que pode levar à um entendimento diferente do que o princípio fala.</p> <h2 id="a-definição-equivocada">A definição equivocada</h2> <p>A principal confusão aqui é que, pelo nome, pode-se dizer que métodos/classes devem fazer apenas uma coisa, e fazê-lo bem feito. Esse é um princípio muito comum e deve sempre ser lembrado durante um processo de refatoração, quando temos funções e classes muito grandes e com muitas responsabilidades. Nesses casos, é importante que tais funções/classes sejam melhor divididas de forma que sejam criadas pequenas unidades funcionais e testáveis. Tais unidades, sejam funções ou classes, devem fazer apenas uma coisa, e fazê-la bem feito. Novamente, esse princípio é importante e faz todo sentido, mas não é essa a definição correta para o Princípio da Responsabilidade Única, conforme o próprio Robert C. Martin fala no livro <em>Clean Architecture</em>:</p> <blockquote> <p>Não se engane, saiba que há um princípio com esse. Uma função deve fazer uma, e apenas uma, coisa. Usamos esse princípio quando refatoramos funções grandes em funções menores; usamos isso nos níveis mais baixos. Mas ele não é um dos princípios SOLID - não é SRP.</p> <ul> <li>Martin, Robert C. Clean Architecture.</li> </ul> </blockquote> <h2 id="a-definição-correta">A definição correta</h2> <p>Ainda segundo Robert C. Martin, a melhor definição para esse princípio seria:</p> <blockquote> <p>Um módulo deve ser responsável por um, e apenas um, ator.</p> <ul> <li>Martin, Robert C. Clean Architecture.</li> </ul> </blockquote> <p>Por <strong>ator</strong>, entende-se que podem ser um usuário, um grupo de usuários, <em>stake holders</em>, ou qualquer outra pessoa que tenha possibilidade de solicitar uma mudança no projeto.</p> <p>Por <strong>módulo</strong>, entende-se qualquer conjunto coeso de funções e estruturas, que possam fazer parte de um mesmo escopo e com apenas um ator como responsável.</p> <h2 id="código">Código</h2> <p>Para esse princípio, segui o exemplo apresentado no livro, trazendo para a linguagem Kotlin. Observe a seguinte classe:</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Employee</span> <span class="p">{</span>

    <span class="k">fun</span> <span class="nf">calculatePay</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>

    <span class="k">fun</span> <span class="nf">reportHours</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>

    <span class="k">fun</span> <span class="nf">save</span><span class="p">()</span> <span class="p">{</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>O Princípio da Responsabilidade Única é quebrado aqui pois temos em uma única classe, três funções pertencentes à contextos diferentes e, portanto, pertencentes à atores diferentes. Abaixo, a representação das funções e seus atores, conforme tratado no livro:</p> <ul> <li><code class="language-plaintext highlighter-rouge">calculatePay()</code> → Departamento de contabilidade, subordinado ao CFO;</li> <li><code class="language-plaintext highlighter-rouge">reportHours()</code> → Departamento de recursos humanos, subordinado ao COO;</li> <li><code class="language-plaintext highlighter-rouge">save()</code> → Departamento de TI, administradores de base de dados, subordinados ao CTO.</li> </ul> <p>A violação do princípio qui está no fato de que, caso qualquer um dos atores citados solicite alguma alteração na implementação de sua função, essa classe terá que mudar, podendo inclusive interferir no funcionamento das demais funções dos outros atores. Isso é um problema.</p> <p>Uma maneira que poderia ser utilizada para resolver esse problema é ter classes específicas para cada contexto e portanto, para cada ator. Assim, qualquer alteração solicitada por qualquer ator, afetará apenas a classe que faz parte do seu contexto. A solução em código poderia ficar da seguinte forma:</p> <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fun</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">employee</span> <span class="p">=</span> <span class="nc">Employee</span><span class="p">(</span>
    	<span class="n">salary</span> <span class="p">=</span> <span class="mf">1000.0</span><span class="p">,</span>
        <span class="n">hours</span> <span class="p">=</span> <span class="mi">220</span>
    <span class="p">)</span>

    <span class="c1">// Para o cálculo</span>
    <span class="kd">val</span> <span class="py">paymentCalculator</span> <span class="p">=</span> <span class="nc">PaymentCalculator</span><span class="p">()</span>
    <span class="n">paymentCalculator</span><span class="p">.</span><span class="nf">calculate</span><span class="p">(</span><span class="n">employee</span><span class="p">.</span><span class="n">salary</span><span class="p">)</span>

    <span class="c1">// Para o reporte de horas</span>
    <span class="kd">val</span> <span class="py">hourReporter</span> <span class="p">=</span> <span class="nc">HourReporter</span><span class="p">()</span>
    <span class="n">hourReporter</span><span class="p">.</span><span class="nf">report</span><span class="p">(</span><span class="n">employee</span><span class="p">.</span><span class="n">hours</span><span class="p">)</span>

    <span class="c1">// Para salvar o objeto Employee na base de dados</span>
    <span class="kd">val</span> <span class="py">employeeSaver</span> <span class="p">=</span> <span class="nc">EmployeeSaver</span><span class="p">()</span>
    <span class="n">employeeSaver</span><span class="p">.</span><span class="nf">save</span><span class="p">(</span><span class="n">employee</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// Classe que representa o Employee</span>
<span class="kd">data class</span> <span class="nc">Employee</span><span class="p">(</span>
    <span class="kd">val</span> <span class="py">salary</span><span class="p">:</span> <span class="nc">Double</span><span class="p">,</span>
    <span class="kd">val</span> <span class="py">hours</span><span class="p">:</span> <span class="nc">Int</span>
<span class="p">)</span>

<span class="c1">// Classe responsável por efetuar os cálculos.</span>
<span class="kd">class</span> <span class="nc">PaymentCalculator</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">fun</span> <span class="nf">calculate</span><span class="p">(</span><span class="n">salary</span><span class="p">:</span> <span class="nc">Double</span><span class="p">):</span> <span class="nc">Double</span> <span class="p">{</span> <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Classe responsável por efetuar o reporte de horas</span>
<span class="kd">class</span> <span class="nc">HourReporter</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">fun</span> <span class="nf">report</span><span class="p">(</span><span class="n">hours</span><span class="p">:</span> <span class="nc">Int</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Classe responsável por salvar o Employee na base de dados</span>
<span class="kd">class</span> <span class="nc">EmployeeSaver</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">fun</span> <span class="nf">save</span><span class="p">(</span><span class="n">employee</span><span class="p">:</span> <span class="nc">Employee</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>No exemplo acima, temos a seguinte relação entre as classes e seus atores:</p> <ul> <li><code class="language-plaintext highlighter-rouge">PaymentCalculator</code> → Departamento de contabilidade, subordinado ao CFO</li> <li><code class="language-plaintext highlighter-rouge">HourReporter</code> → Departamento de recursos humanos, subordinado ao COO</li> <li><code class="language-plaintext highlighter-rouge">EmployeeSaver</code> → Departamento de TI, administradores de base de dados, subordinados ao CTO</li> </ul> <p>Perceba que, para cada contexto (ou ator), temos uma classe correspondente e nenhuma dessas classes possui referência para alguma outra. Ou seja, caso um ator solicite uma alteração na implementação da sua função, as classes dos outros atores não precisarão ser alteradas, mantendo os contextos coesos. Num caso real, a comunicação entre as classes poderia ser possível, desde que sejam tomados alguns cuidados. Mas para simplificar o exemplo, vamos considerar que isso não poderia acontecer.</p> <p>A única classe que pode ser conhecida por um ou mais contextos é a classe <code class="language-plaintext highlighter-rouge">Employee</code> que é a representação de um empregado no contexto do projeto.</p> <p>Outro detalhe importante a ser mencionado é o acréscimo de código ao projeto quando nos preocupamos com esse princípio, o que pode representar de início, mais complexidade. Porém, analisando mais a fundo, isso não é verdade, pois essa separação cria contextos específicos para cada ator. Além disso, cada função terá mais implementações auxiliares (funções privadas dentro das classes), o que justifica ainda mais a necessidade de separação em classes específicas.</p> <h2 id="conclusão">Conclusão</h2> <p>O Princípio da Responsabilidade Única é a base para a criação de classes com contexto definido e de uma forma que os limites entre as classes seja respeitado. Isso nos dá a possibilidade de reaproveitar essas classes em outros pontos do projeto. Além disso, classes coesas e divididas de acordo com suas responsabilidades contribuem para facilitar o desenvolvimento de testes unitários, outro tópico muito importante no desenvolvimento de software.</p> <h2 id="referências">Referências</h2> <ul> <li>Arquitetura Limpa: O Guia do Artesão para Estrutura e Design de Software. Martin, Robert C ; traduzido por Samantha Batista. Rio de Janeiro. Alta Books, 2018.</li> </ul> </div> </article> <div class="row"> <ul class="pager"> <li><a class="previous" href="/posts/solid.html">&laquo; SOLID by example com Kotlin</a></li> </ul> </div> <!-- Seção de Comentários (Disqus) --> <div class="row"> <br/> Comente abaixo e dê seu feedback em relação ao post. <br/> <div id="disqus_thread"></div> <script> var disqus_config = function () { this.page.url = 'https://hallisonoliveira.com.br/single_responsibility/'; this.page.identifier = '/single_responsibility/'; }; (function () { var d = document, s = d.createElement('script'); s.src = 'https://hallisonoliveira.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> </div> </div> </div> </div> </div> </div> <label for="sidebar-checkbox" class="sidebar-toggle"></label> <script> (function(document) { var toggle = document.querySelector('.sidebar-toggle'); var sidebar = document.querySelector('#sidebar'); var checkbox = document.querySelector('#sidebar-checkbox'); document.addEventListener('click', function(e) { var target = e.target; if(!checkbox.checked || sidebar.contains(target) || (target === checkbox || target === toggle)) return; checkbox.checked = false; }, false); })(document); </script> <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script> <script src="/src/js/bootstrap.min.js"></script> </body> </html>
